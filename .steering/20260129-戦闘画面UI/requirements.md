# 戦闘画面UI（基本表示・入力）

## 概要

本の詳細画面から遷移し、読書進捗を入力する戦闘画面を実装する。敵（ドラゴン）の表示、HPバー、ページ数入力フォームを提供し、ユーザーが読書進捗を記録できるようにする。

## 背景

- 積読＆ドラゴンズでは「読書 = 戦闘」というコンセプトで、読んだページ数をダメージとして敵（ドラゴン）のHPを削る
- 戦闘画面は読書進捗を記録するメインの操作画面であり、RPG感を演出する重要なUI
- 既存の`POST /books/:id/logs` APIと連携して戦闘ログを記録する

## 要件

### 機能要件

- [x] 本の詳細画面から「戦闘」ボタンで戦闘画面に遷移できる
- [x] ドラゴン画像をランク（ページ数に応じた強さ）に応じて表示する
- [x] HPバー（残りページ/総ページ）を表示する
- [x] 読んだページ数を入力できる（1以上、残りページ数以下に自動補正）
- [x] メモ（任意）を入力できる
- [x] 「こうげき」ボタンで戦闘ログをAPIに記録できる
- [x] 戻るボタンで本の詳細画面に戻れる

### ドラゴンランク仕様

| ランク | ページ数 | 色      |
| ------ | -------- | ------- |
| 1      | 〜200    | 緑系    |
| 2      | 201〜300 | 青系    |
| 3      | 301〜500 | 紫系    |
| 4      | 501〜700 | 赤系    |
| 5      | 701〜    | 金/黒系 |

### 非機能要件

- モバイルファーストのレスポンシブデザイン
- SFC時代のRPG風（ドラクエ系）のビジュアルデザイン
- WCAG 2.1 Level AA準拠（キーボード操作、コントラスト比）

## 受け入れ条件

- [x] 本の詳細画面から戦闘画面に遷移できる
- [x] ドラゴンランクに応じた画像（プレースホルダー）が表示される
- [x] HPバーが現在のHP/最大HPを正しく表示する
- [x] ページ数入力のバリデーションが正しく動作する
- [x] 攻撃ボタンでAPIが呼び出され、本の進捗が更新される
- [x] 全てのテスト（unit, lint, typecheck, format）がパスする

## 対象外（スコープ外）

- 戦闘演出（アニメーション、メッセージウィンドウ）→ #58で対応
- 討伐時の特別演出 → #58で対応
- 書影からドラゴンへの変化アニメーション → #58で対応
- レベルアップ通知 → 別Issue

## 関連Issue

- #55 戦闘ログ記録API（完了済み、依存）
- #58 戦闘演出（後続）

## 参考ドキュメント

- [planning/screen-design.md](../../../planning/screen-design.md) - 画面設計
- [planning/visual-design.md](../../../planning/visual-design.md) - ビジュアルデザイン仕様
