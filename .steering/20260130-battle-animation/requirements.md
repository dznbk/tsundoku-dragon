# 戦闘演出（メッセージ・HPアニメーション）

## 概要

戦闘時のドラクエ風演出を実装する。書影→ドラゴン変化、攻撃メッセージ、HPバー減少アニメーション。

## 背景

- 戦闘画面UIは #57 で基本実装済み
- RPG感を高め、読書の達成感を演出するために戦闘演出が必要
- ドラクエ風のメッセージ表示とアニメーションでゲーム体験を強化

## 要件

### 機能要件

- [x] 戦闘開始時に書影→ドラゴン変化のトランジション表示
- [x] 攻撃時にドラクエ風メッセージを1文字ずつタイピング表示
- [x] HPバーが減少するアニメーション
- [x] メッセージ完了後に入力可能状態に戻る

### 演出フロー

#### 戦闘開始時（画面遷移時）

1. 書影を中央に表示（1秒程度）
2. 書影がフェードアウト、ドラゴンがフェードイン
3. 通常の戦闘画面へ

#### 攻撃時

1. 「○○のこうげき！」（1秒表示）
2. 「△△ に ×× のダメージ！」（1.5秒表示）
3. HPバーが減少アニメーション（0.5秒程度）
4. 入力可能状態に戻る

### 非機能要件

- アニメーションはCSSベースで実装（JavaScriptのタイマーは補助）
- アクセシビリティ対応（aria属性、キーボード操作）

## 受け入れ条件

- [x] BattleMessage: メッセージが1文字ずつ表示される
- [x] BattleMessage: 複数メッセージが順番に表示される
- [x] BattleMessage: 全メッセージ完了後に onComplete が呼ばれる
- [x] BattleTransition: 書影→ドラゴンのフェード遷移が行われる
- [x] BattleTransition: ISBN がない場合はドラゴンのみ表示
- [x] HpBar: animateTo に向かってアニメーションする
- [x] HpBar: アニメーション完了後に onAnimationComplete が呼ばれる

## 対象外（スコープ外）

- 討伐完了時の演出（#59 で対応）
- レベルアップ表示（#59 で対応）

## 参考ドキュメント

- [planning/visual-design.md](../../../planning/visual-design.md) - ビジュアルデザイン仕様
- [planning/screen-design.md](../../../planning/screen-design.md) - 画面設計
- [GitHub Issue #58](https://github.com/dznbk/tsundoku-dragon/issues/58)
