# タスクリスト

## タスク完了の原則

**このファイルの全タスクが完了するまで作業を継続すること**

### 必須ルール

- 全てのタスクを `[x]` にすること
- 未完了タスク `[ ]` を残したまま作業を終了しない
- 「時間の都合」「難しい」などの理由でのスキップは禁止

### スキップが許可されるケース

技術的理由に該当する場合のみ:

- 実装方針の変更により機能自体が不要になった
- アーキテクチャ変更により別の実装方法に置き換わった

スキップ時は理由を明記:

```markdown
- [~] タスク名 (スキップ理由: 具体的な技術的理由)
```

---

## 進捗

- 開始: 2026-01-31
- 完了: 2026-01-31

---

## フェーズ1: VictoryScreen コンポーネント実装

- [x] VictoryScreen.tsx を作成（メッセージ生成・状態管理）
- [x] VictoryScreen.module.css を作成（スタイル定義）
- [x] index.ts に VictoryScreen のエクスポートを追加

## フェーズ2: BattlePage との連携

- [x] BattlePage.tsx を変更し、victory 状態時に VictoryScreen を表示
- [x] battleResult の情報を VictoryScreen に渡す

## フェーズ3: テスト

- [x] VictoryScreen.test.tsx を作成
  - 討伐メッセージが表示される
  - 経験値が正しく表示される
  - 討伐ボーナスがある場合のみボーナスメッセージが表示される
  - レベルアップしたスキルが全て表示される
  - 複数スキルがレベルアップした場合、順番に表示される
  - 全演出完了後に「ホームへもどる」ボタンが表示される
  - ボタンクリックで onGoHome が呼ばれる

## フェーズ4: 品質チェック

- [x] テストが通ることを確認 (`npm run test:all`)
- [x] リントエラーがないことを確認 (`npm run lint`)
- [x] 型エラーがないことを確認 (`npm run typecheck`)
- [x] フォーマットエラーがないことを確認 (`npm run format:check`)

---

## 振り返り

### うまくいったこと

- BattleMessage コンポーネントを再利用することで、コード重複を避け、一貫した演出を実現
- Issue #59 で提案された4段階状態遷移をシンプルな2段階状態（isComplete）に簡略化
- 包括的なテスト（9件）でエッジケースを含む主要シナリオをカバー

### 改善点

- generateVictoryMessages() 関数の単体テストを追加すると保守性が向上する
- アクセシビリティ（role属性、autoFocus）のさらなる強化が可能

### 次回への学び

- 既存コンポーネントの再利用を優先することで、開発効率と品質を両立できる
- 状態管理はシンプルに保つことで、可読性・保守性が向上する
