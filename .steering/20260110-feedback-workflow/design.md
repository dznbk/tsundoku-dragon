# 設計書

## 意思決定

### 採用した設計

**`/continue-feature` コマンドの新設** + **ステアリングスキルへの運用ルール追記**

- 既存ステアリングの `tasklist.md` に「追加対応」セクションを追記する形式
- 新規ステアリングは作成しない（同一機能の継続作業のため）
- 軽微な修正（1ファイル・1時間未満）はステアリング不要

### 代替案との比較

| 案                          | メリット               | デメリット                           | 採用 |
| --------------------------- | ---------------------- | ------------------------------------ | ---- |
| A: 既存ステアリングに追記   | シンプル、一箇所で管理 | tasklist.mdが肥大化する可能性        | ✓    |
| B: 新規ステアリングを作成   | 作業単位が明確         | 関連性がわかりにくい、重複管理が必要 | -    |
| C: 軽微な修正は全て記録不要 | 最もシンプル           | 後から経緯を追えない                 | -    |

### 選定理由

- フィードバック対応は元機能の延長であり、同一ステアリングで管理するのが自然
- 「追加対応」セクションを設けることで、元のタスクと追加作業を区別可能
- 軽微な修正（1ファイル・1時間未満）は記録のオーバーヘッドが大きいため除外

## データフロー

### フィードバック対応フロー

1. ユーザーがフィードバックを指示
2. `/continue-feature <ステアリングパス>` を実行
3. 既存の `tasklist.md` を読み込み
4. 「追加対応」セクションに新規タスクを追加
5. 実装ループ（add-featureと同様）
6. 振り返りセクションを更新

## コンポーネント設計

### 追加・変更するファイル

| ファイル                               | 種別 | 責務                         |
| -------------------------------------- | ---- | ---------------------------- |
| `.claude/commands/continue-feature.md` | 新規 | 継続作業コマンド定義         |
| `.claude/skills/steering/SKILL.md`     | 変更 | フィードバック運用ルール追記 |

### 主要コンポーネント

#### `/continue-feature` コマンド

**責務**: 既存ステアリングを参照して継続作業を実行

**ワークフロー**:

1. 引数でステアリングパスを受け取る（例: `.steering/20260107-本の登録画面`）
2. 既存の requirements.md, design.md, tasklist.md を読み込む
3. 現在のフィードバック内容を分析
4. tasklist.md の「追加対応」セクションにタスクを追加
5. 実装ループを実行（add-featureと同様）
6. 振り返りを更新

### 軽微な修正の判断基準

以下の**両方**を満たす場合は「軽微な修正」としてステアリング不要:

1. **影響範囲**: 変更ファイルが1-2ファイル以内
2. **作業時間**: 1時間未満で完了する見込み

例:

- 軽微: タイポ修正、スタイル微調整、エラーメッセージ変更
- 継続作業: 新規API追加、複数コンポーネント変更、ロジック修正

### tasklist.md の追加対応セクション形式

```markdown
---

## 追加対応 (YYYY-MM-DD)

### フィードバック内容

- {フィードバック1の概要}
- {フィードバック2の概要}

### 追加タスク

- [ ] タスク1
- [ ] タスク2
```

## テスト戦略

### 動作確認

- `/continue-feature` コマンドが正しくステアリングを参照できること
- tasklist.md に追加対応セクションが正しく追記されること
- 実装ループが正常に動作すること

---

## 任意セクション

### 運用上の注意

- 追加対応セクションは複数回追記可能（日付で区別）
- 元のタスクリストは変更しない（履歴として保持）
- 振り返りは追加対応ごとに記載
