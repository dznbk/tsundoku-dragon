---
description: 既存機能のフィードバック対応を継続実装する
---

# 機能の継続実装

**引数:** ステアリングパス (例: `/continue-feature .steering/20260107-本の登録画面`)

---

## ステップ1: 既存ステアリングの確認

1. 引数で指定されたステアリングディレクトリパスを確認する。
2. 以下の3つのファイルを読み込む:

- `[ステアリングパス]/requirements.md`
- `[ステアリングパス]/design.md`
- `[ステアリングパス]/tasklist.md`

3. 元の要件・設計・完了タスクを把握する。

## ステップ2: フィードバック内容の分析

1. ユーザーから受けたフィードバック内容を確認する。
2. 以下の判断基準で「軽微な修正」か「継続作業」かを判断する:

### 軽微な修正（ステアリング不要）の条件

以下の**両方**を満たす場合:

- 変更ファイルが1-2ファイル以内
- 1時間未満で完了する見込み

例: タイポ修正、スタイル微調整、エラーメッセージ変更

**この条件を満たす場合は、ステアリングなしで直接修正を行い、コミットメッセージで追跡する。**

### 継続作業（本コマンドで対応）の条件

- 複数ファイルに変更が必要
- 新規ロジックの追加
- APIの変更
- 1時間以上の作業見込み

## ステップ3: 追加対応セクションの作成

1. `Skill('steering')` を **実装モード** で使用する。
2. `tasklist.md` に以下の形式で「追加対応」セクションを追記する:

```markdown
---

## 追加対応 (YYYY-MM-DD)

### フィードバック内容

- {フィードバック1の概要}
- {フィードバック2の概要}

### 追加タスク

- [ ] タスク1
- [ ] タスク2
```

3. `Edit` ツールを使用して `tasklist.md` を更新する。

## ステップ4: 実装ループ

**このステップは、追加タスクの全タスクが `[x]` になるまで自動で繰り返されるループ処理です。**

**ループ開始:**

1. タスクリストの読み込み:
   - `[ステアリングパス]/tasklist.md` ファイルを読み込む。

2. 進捗の確認:
   - 「追加対応」セクション内に未完了タスク (`[ ]`) が存在するか確認する。
   - **もし未完了タスクが存在しない場合:** この実装ループは完了とみなし、ただちに**ステップ5**へ進む。
   - **もし未完了タスクが存在する場合:** 次の処理に進む。

3. タスクの実行:
   - 追加対応セクションの**先頭にある未完了タスク**を1つ特定する。
   - そのタスクを完了させるために必要な実装作業を実行する。

4. タスクリストの更新:
   - 実行したタスクが完了したら、`Edit` ツールを使用して `tasklist.md` を更新し、該当タスクを `[ ]` から `[x]` に変更する。

5. ループ継続:
   - **ステップ4の先頭に戻り、処理を繰り返す。**

---

### ※ 実装ループ内の例外処理ルール ※

- **ルールA: タスクが大きすぎる場合**
  - 現在のタスクをより小さな複数のサブタスクに分割し、ループを継続する。

- **ルールB: 技術的理由でタスクが不要になった場合**
  - 該当タスクを `[x] ~~タスク名~~ (理由: [技術的理由])` の形式で更新し、ループを継続する。

---

## ステップ5: 品質チェック

1. 以下のコマンドを順番に実行し、全てがパスすることを確認する。

```bash
npm run test:all
npm run lint
npm run typecheck
npm run format:check
```

2. エラーが発生した場合は、問題を修正してから再度このステップを実行する。

## ステップ6: 振り返りの更新

1. `tasklist.md` の振り返りセクションに追加対応の結果を記載する:

- 完了日
- 対応したフィードバックの概要
- 学んだこと

2. 必要に応じて `docs/CONTEXT.md` に重要な決定事項を転記する。

## ステップ7: コミットとPR

1. 実装した変更をコミットする。
2. 既存のPRがある場合は追加コミット、ない場合は新規PRを作成する。
3. PRのURLをユーザーに報告する。

## 完了条件

- 追加対応セクションの全タスクが完了している
- 品質チェック（test, lint, typecheck, format:check）が全てパス
- 振り返りが記載されている
- 変更がコミットされている
