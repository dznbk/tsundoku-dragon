# 開発コンテキスト

このファイルは開発セッション間でコンテキストを引き継ぐためのものです。

## プロジェクト概要

**積読＆ドラゴンズ** - 積読消化をRPGのように楽しくやれるWebアプリ

詳細は [planning/product-concept.md](../planning/product-concept.md) を参照。

---

## 技術スタック（決定済み）

| 項目 | 選定 | 備考 |
|------|------|------|
| フロントエンド | React + TypeScript | Vite使用 |
| ホスティング（フロント） | Cloudflare Pages | |
| API | Cloudflare Workers | |
| DB | DynamoDB | プロビジョンドモード（無料枠内に収める） |
| 認証 | Firebase Auth | Google, Twitter認証 |
| 画像ストレージ | Cloudflare R2 | 敵画像の保存用 |

### 選定理由

**Cloudflare Pages / Workers / R2**
- 既にCloudflareでドメイン（deepon.dev）を運用しており、統一したかった
- 無料枠が大きく、ランニングコストを抑えられる

**DynamoDB**
- MySQLの経験が多いため、違うDBを学習したかった
- AWSアカウントを既に持っている
- 無料枠（ストレージ25GB、25RCU/WCU）で個人開発には十分

**Firebase Auth**
- 認証自体は無料（電話認証のみ有料）
- Google, Twitter認証の設定が簡単
- 情報が多く、トラブル時に解決しやすい

**React + TypeScript**
- 既存の経験あり（deepon.dev, app001.deepon.devで使用）

### DynamoDB注意点
- 必ず**プロビジョンドモード**で作成（オンデマンドだと課金される）
- Auto Scalingは無効にする
- AWS Budgetsでアラート設定推奨

---

## 未決定事項・次回検討事項

### データ設計
- ユーザー、本、スキル、進捗記録などのテーブル設計が必要

### 画面設計
- どのような画面が必要か洗い出しが必要
- ワイヤーフレームの作成

### 経験値・レベルの計算式
- 1ページ読んだら何経験値？
- レベルアップに必要な経験値は？
- 討伐ボーナスはどのくらい？

---

## 決定済み事項サマリ

| 項目 | 決定内容 |
|------|----------|
| ターゲット | 一般書籍含む、一人利用 |
| 認証 | SNS認証（複数デバイス対応のため） |
| スキル構造 | フラット、ユーザー定義可能 |
| スキル選択 | 選択肢から選ぶ or 自由入力で新規追加 |
| レベルアップ | あり |
| 戦闘方式 | 一方的攻撃、ドラクエ風メッセージ |
| 敵画像 | デフォルト1種、複数対応の構造で実装 |
| スキル表示 | MVP時点はリスト表示 |

---

## 開発の進め方（想定）

1. まず本の登録機能を作ってデプロイして動作確認
2. 順次機能を追加していく

---

## 議論ログ

### 2024-12-14 技術選定

**議論した内容：**
- Cloudflare Workers / Supabase の比較
- ドキュメントDB vs RDBMSの検討
- DynamoDBの無料枠と課金モデル
- 認証サービスの比較（Firebase Auth, Clerk, Auth0, Cognito）
- 画像ストレージの選定

**決定事項：**
- Cloudflare Pages + Workers + R2 でCloudflare寄せ
- DBはDynamoDB（学習目的も兼ねて）
- 認証はFirebase Auth
- DynamoDBはプロビジョンドモードで無料枠内運用

---

### 2024-12-13 初回壁打ち

**議論した内容：**
- 基本コンセプトの確認
- ターゲットユーザーの明確化
- MVP機能の範囲
- スキルシステムの設計方針
- 戦闘の体験設計
- 敵画像の扱い
- 認証の必要性

**次回やること：**
- データ設計
- 画面設計
- 経験値計算式の決定
